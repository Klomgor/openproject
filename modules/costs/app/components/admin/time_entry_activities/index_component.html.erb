<%=
  flex_layout(data: wrapper_data_attributes) do |flex|
    flex.with_row do
      render(Primer::OpenProject::SubHeader.new) do |subheader|
        subheader.with_filter_input(
          name: "border-box-filter",
          label: "Search time entry activity",
          visually_hide_label: true,
          placeholder: "Search time entry activity",
          leading_visual: {
            icon: :search,
            size: :small
          },
          show_clear_button: false,
          data: {
            action: "input->projects--settings--border-box-filter#filterLists",
            "projects--settings--border-box-filter-target": "filter"
          }
        )
        subheader.with_action_button(scheme: :primary) do |button|
          button.with_leading_visual_icon(icon: :plus)
          "Activity"
        end
      end
    end

    flex.with_row do
      render(border_box_container(data: { test_selector: "admin-time-entry-activity" })) do |component|
        component.with_header(font_weight: :bold) { "Time entry activities" }

        if time_entry_activities.empty?
          component.with_row do
            render(Primer::Beta::Text.new(color: :subtle)) { "No activities exist" }
          end
        else
          time_entry_activities.each do |activity|
            component.with_row(test_selector: "time-entry-activity-row-#{activity.id}") do
              render(Admin::TimeEntryActivities::ActivityComponent.new(activity: activity, max_activity_position: max_activity_position))
            end
          end
        end
      end
    end
  end
%>
